{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "Create Dataset Request",
  "description": "HTTP POST request body requesting the creation of a dataset from the components included in the request.\n\nFor a request to be considered valid, it must contain exactly 1 of the optional parameters `file` or `url`.  If a request body contains both a `file` and a `url` field value, the service will return a `400` error.",
  "type": "object",
  "properties": {
    "details": { "$ref": "#/$defs/meta" },
    "metaFiles": {
      "type": "array",
      "items": { "$ref": "#/$defs/postFile" },
      "unevaluatedItems": false
    }
  },
  "required": [ "details" ],
  "unevaluatedProperties": false,
  "oneOf": [
    {
      "title": "Create Dataset File Upload",
      "type": "object",
      "properties": {
        "dataFiles": {
          "type": "array",
          "items": { "$ref": "#/$defs/postFile" },
          "minItems": 1,
          "unevaluatedItems": false
        }
      },
      "required": [ "dataFiles" ]
    },
    {
      "title": "Create Dataset URL Upload",
      "type": "object",
      "properties": {
        "url": {
          "type": "string",
          "format": "iri"
        }
      },
      "required": [ "url" ]
    }
  ],
  "$defs": {
    "meta": {
      "title": "Dataset Post Meta",
      "description": "Metadata about the dataset being submitted.",
      "type": "object",
      "properties": {
        "datasetType": { "$ref": "../../_common/_types/dataset/data-type-short.json" },
        "visibility": {
          "$ref": "../../_common/_types/dataset/visibility.json",
          "default": "private"
        }
      },
      "allOf": [ { "$ref": "../../_common/_types/dataset/base-meta.json" } ],
      "unevaluatedProperties": false,
      "required": [ "datasetType", "installTargets" ],
      "contentMediaType": "application/json"
    },
    "postFile": {
      "title": "Upload File",
      "type": "string",
      "format": "file",
      "contentMediaType": "application/octet-stream"
    }
  }
}
