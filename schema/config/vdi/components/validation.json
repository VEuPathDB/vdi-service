{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://veupathdb.github.io/vdi-service/schema/vdi/validation.json",
  "anyOf": [
    { "$ref": "#/$defs/requiredRule" },
    { "oneOf": [
      { "$ref": "#/$defs/arrayValidationRule" },
      { "$ref": "#/$defs/boolValidationRule" },
      { "$ref": "#/$defs/floatValidationRule" },
      { "$ref": "#/$defs/intValidationRule" },
      { "$ref": "#/$defs/stringValidationRule" }
    ] }
  ],
  "$defs": {
    "requiredRule": {
      "type": "object",
      "properties": { "required": { "type": "boolean" } }
    },
    "stringValidationRule": {
      "type": "object",
      "properties": {
        "type": { "const": "string" },
        "minLength": {
          "type": "integer",
          "minimum": 0
        },
        "maxLength": {
          "type": "integer",
          "minimum": 0
        },
        "pattern": {
          "type": "string",
          "format": "regex"
        },
        "enum": {
          "type": "array",
          "items": { "type": "string" },
          "minItems": 1
        },
        "format": {
          "type": "string",
          "enum": [
            "date-time",
            "date",
            "time",
            "duration",
            "email",
            "idn-email",
            "hostname",
            "idn-hostname",
            "ipv4",
            "ipv6",
            "uri",
            "uri-reference",
            "iri",
            "iri-reference",
            "uuid",
            "uri-template",
            "json-pointer",
            "relative-json-pointer",
            "regex"
          ]
        },
        "const": {
          "type": "string"
        }
      },
      "unevaluatedProperties": false,
      "required": [ "type" ]
    },
    "intValidationRule": {
      "type": "object",
      "properties": {
        "type": { "const": "integer" },
        "minimum": { "type": "integer" },
        "maximum": { "type": "integer" },
        "multipleOf": { "type": "integer" },
        "exclusiveMinimum": { "type": "integer" },
        "exclusiveMaximum": { "type": "integer" },
        "enum": {
          "type": "array",
          "items": { "type": "integer" },
          "minItems": 1
        },
        "const": {
          "type": "integer"
        }
      },
      "required": [ "type" ],
      "unevaluatedProperties": false
    },
    "floatValidationRule": {
      "type": "object",
      "properties": {
        "type": { "const": "number" },
        "minimum": { "type": "number" },
        "maximum": { "type": "number" },
        "multipleOf": { "type": "number" },
        "exclusiveMinimum": { "type": "number" },
        "exclusiveMaximum": { "type": "number" },
        "enum": {
          "type": "array",
          "items": { "type": "number" },
          "minItems": 1
        },
        "const": {
          "type": "number"
        }
      },
      "required": [ "type" ],
      "unevaluatedProperties": false
    },
    "boolValidationRule": {
      "type": "object",
      "properties": {
        "type": { "const": "boolean" },
        "const": { "type": "boolean" }
      },
      "required": [ "type" ],
      "unevaluatedProperties": false
    },
    "arrayValidationRule": {
      "type": "object",
      "properties": {
        "type": { "const": "array" },
        "minItems": {
          "type": "integer",
          "minimum": 0
        },
        "maxItems": {
          "type": "integer",
          "minimum": 1
        },
        "contains": {
          "oneOf": [
            { "$ref": "#/$defs/floatValidationRule" },
            { "$ref": "#/$defs/intValidationRule" },
            { "$ref": "#/$defs/stringValidationRule" }
          ]
        },
        "minContains": {
          "type": "integer",
          "minimum": 0
        },
        "maxContains": {
          "type": "integer",
          "minimum": 0
        },
        "uniqueItems": { "type": "boolean" }
      },
      "required": [ "type" ],
      "unevaluatedProperties": false
    }
  }
}